<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="adm.template_application_menu_medical_info">
        <t t-call="website.layout">
            <t t-set="title">Application</t>
            <link rel="stylesheet" href="/adm/static/css/form_application.css"/>
            <link rel="stylesheet" href="/adm/static/css/medical.css"/>
            <div class="oe_struture"/>
            <div class="oe_struture">
                <t t-call="adm.template_application_menu"/>
                <div class="container-fluid d-flex p-4">
                    <main class="col">
                        <section class="card mb-2">
                            <section class="card-header">
                                <h1>Medical Information</h1>
                            </section>

                            <section class="card-body">
                                <div class="container">
                                    <t t-if="application.status_id.type_id !='return' and application.status_id.type_id != 'started'">
                                        <div class="alert alert-warning mt-3" role="alert">
                                             The request has already been sent.
                                        </div>
                                    </t>
                                    <t t-else="">
                                        <article class="border rounded p-2 m-1 d-none" id="form-template-condition">
                                            <input required="required" class="form-control" type="hidden" name="medical_condition_id" value="-1"/>
                                            <div class="row">
                                                <section class="col-5">
                                                    <label>
                                                        Name
                                                        <span class="text-danger"> *</span>
                                                    </label>
                                                    <input type="checkbox"/> Other
                                                    <select class="form-control">
                                                        <option>Asthma</option>
                                                        <option>Attention Deficit Disorder/Hyperactive</option>
                                                        <option>Neurological Concerns</option>
                                                        <option>Seizure disorder/Epilepsy</option>
                                                        <option>Diabetes</option>
                                                        <option>Frequent ear infections</option>
                                                        <option>Frequent Headaches</option>
                                                        <option>Heart Problems</option>
                                                        <option>Kidney/urinary problems</option>
                                                        <option>Menstrual problems</option>
                                                        <option>Glasses/contact lens</option>
                                                        <option>Emotional concerns</option>
                                                        <option>Other</option>
                                                    </select>
                                                    <input required="required" class="form-control" type="text" name="medical_condition_name"/>
                                                </section>
                                                <section class="col-6">
                                                    <label>
                                                        comment
                                                        <span class="text-danger"> *</span>
                                                    </label>
                                                    <input required="required" class="form-control" type="text" name="medical_condition_comment"/>
                                                </section>
                                                <section class="col-1 d-flex justify-content-center p-3">
                                                    <button type="button" class="btn btn-danger remove-medical_condition">
                                                        <i class="fa fa-times"/>
                                                    </button>
                                                </section>
                                            </div>
                                        </article>

                                        <article class="border rounded p-2 m-1 d-none" id="form-template-allergy">
                                            <input required="required" class="form-control" type="hidden" name="medical_allergy_id" value="-1"/>
                                            <div class="row">
                                                <section class="col-5">
                                                    <label>
                                                        Name
                                                        <span class="text-danger"> *</span>
                                                    </label>
                                                    <input required="required" class="form-control" type="text" name="medical_allergy_name"/>
                                                </section>
                                                <section class="col-6">
                                                    <label>
                                                        comment
                                                        <span class="text-danger"> *</span>
                                                    </label>
                                                    <input required="required" class="form-control" type="text" name="medical_allergy_comment"/>
                                                </section>
                                                <section class="col-1 d-flex justify-content-center p-3">
                                                    <button type="button" class="btn btn-danger remove-medical_allergy">
                                                        <i class="fa fa-times"/>
                                                    </button>
                                                </section>
                                            </div>
                                        </article>

                                        <article class="border rounded p-2 m-1 d-none" id="form-template-medication">
                                            <input required="required" class="form-control" type="hidden" name="medical_medication_id" value="-1"/>
                                            <div class="row">
                                                <section class="col-5">
                                                    <label>
                                                        Name
                                                        <span class="text-danger"> *</span>
                                                    </label>
                                                    <input required="required" class="form-control" type="text" name="medical_medication_name"/>
                                                </section>
                                                <section class="col-6">
                                                    <label>
                                                        comment
                                                        <span class="text-danger"> *</span>
                                                    </label>
                                                    <input required="required" class="form-control" type="text" name="medical_medication_comment"/>
                                                </section>
                                                <section class="col-1 d-flex justify-content-center p-3">
                                                    <button type="button" class="btn btn-danger remove-medical_medication">
                                                        <i class="fa fa-times"/>
                                                    </button>
                                                </section>
                                            </div>
                                        </article>




                                        <form t-att-action="'/admission/applications/{}/write'.format(application_id)" method="post" enctype="multipart/form-data">

                                            <input required="required" class="form-control" type="hidden" name="has_medical_info"/>
                                            <section class="container-fluid mt-3">
                                                <div class="row mb-4 justify-content-center align-items-center">
                                                    <section class="col-8">
                                                        <label>
                                                            Doctor Name
                                                            <span class="text-danger"> *</span>
                                                        </label>
                                                        <input required="required" class="form-control" type="text" name="doctor_name" t-att-value="application.doctor_name"/>
                                                    </section>
                                                    <section class="col-4">
                                                        <label>
                                                            Student Blood Type
                                                            <span class="text-danger"> *</span>
                                                        </label>
                                                        <input required="required" class="form-control" type="text" name="blood_type" t-att-value="application.blood_type"/>
                                                    </section>
                                                    <section class="col">
                                                        <label>
                                                            Doctor Address
                                                            <span class="text-danger"> *</span>
                                                        </label>
                                                        <input required="required" class="form-control" type="text" name="doctor_address" t-att-value="application.doctor_address"/>
                                                    </section>
                                                    <section class="col">
                                                        <label>
                                                            Doctor phone
                                                            <span class="text-danger"> *</span>
                                                        </label>
                                                        <input required="required" class="form-control" type="text" name="doctor_phone" t-att-value="application.doctor_phone"/>
                                                    </section>
                                                    <section class="col">
                                                        <label>
                                                            Permision to treat?
                                                            <span class="text-danger"> *</span>
                                                        </label>

                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" type="radio" name="permission_to_treat" id="pst_yes" value="true" t-att-checked="application.permission_to_treat"/>
                                                            <label class="form-check-label" for="pst_yes">Yes</label>
                                                        </div>
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" type="radio" id="pst_no" name="permission_to_treat" value="" t-att-checked="not application.permission_to_treat"/>
                                                            <label class="form-check-label" for="pst_no">No</label>
                                                        </div>
                                                    </section>
                                                </div>

                                                <div class="card mt-2">
                                                    <section class="card-header p-0">
                                                        <h3>Medical Conditions</h3>
                                                    </section>
                                                    <section id="form-condition" class="container-fluid card-body p-0">
                                                        <t t-foreach="application.medical_conditions_ids" t-as="condition">
                                                            <article class="border rounded p-2 m-1" t-att-id="'medical_condition_{}'.format(condition_index+1)">
                                                                <input required="required" class="form-control" type="hidden" name="medical_condition_id" t-att-value="condition.id"/>
                                                                <div class="row">
                                                                    <section class="col-5">
                                                                        <label>
                                                                            Name
                                                                            <span class="text-danger"> *</span>
                                                                        </label>
                                                                        <input required="required" class="form-control" type="text" name="medical_condition_name" t-att-value="condition.name"/>
                                                                    </section>
                                                                    <section class="col-6">
                                                                        <label>
                                                                            comment
                                                                            <span class="text-danger"> *</span>
                                                                        </label>
                                                                        <input required="required" class="form-control" type="text" name="medical_condition_comment" t-att-value="condition.comment"/>
                                                                    </section>
                                                                    <section class="col-1 d-flex justify-content-center p-3">
                                                                        <button type="button" class="btn btn-danger remove-medical_condition" t-att-data-id="condition_index+1">
                                                                            <i class="fa fa-times"/>
                                                                        </button>
                                                                    </section>
                                                                </div>
                                                            </article>
                                                        </t>
                                                        <button type="button" class="add-medical_condition btn btn-secondary d-block ml-auto mr-1 mt-3 mb-3 btn-add" id="btn-condition">&#10010;</button>
                                                    </section>
                                                </div>

                                                <div class="card mt-2">
                                                    <section class="card-header p-0">
                                                        <h3>Medical allergies</h3>
                                                    </section>
                                                    <section id="form-allergy" class="container-fluid card-body p-0">
                                                        <t t-foreach="application.medical_allergies_ids" t-as="allergy">
                                                            <article class="border rounded p-2 m-1" t-att-id="'medical_allergy_{}'.format(allergy_index+1)">
                                                                <input required="required" class="form-control" type="hidden" name="medical_allergy_id" t-att-value="allergy.id"/>
                                                                <div class="row">
                                                                    <section class="col-5">
                                                                        <label>
                                                                            Name
                                                                            <span class="text-danger"> *</span>
                                                                        </label>
                                                                        <input required="required" class="form-control" type="text" name="medical_allergy_name" t-att-value="allergy.name"/>
                                                                    </section>
                                                                    <section class="col-6">
                                                                        <label>
                                                                            comment
                                                                            <span class="text-danger"> *</span>
                                                                        </label>
                                                                        <input required="required" class="form-control" type="text" name="medical_allergy_comment" t-att-value="allergy.comment"/>
                                                                    </section>
                                                                    <section class="col-1 d-flex justify-content-center p-3">
                                                                        <button type="button" class="btn btn-danger remove-medical_allergy" t-att-data-id="allergy_index+1">
                                                                            <i class="fa fa-times"/>
                                                                        </button>
                                                                    </section>
                                                                </div>
                                                            </article>
                                                        </t>
                                                        <button type="button" class="add-medical_allergy btn btn-secondary d-block ml-auto mr-1 mt-3 mb-3 btn-add">&#10010;</button>
                                                    </section>
                                                </div>

                                                <div class="card mt-2">
                                                    <section class="card-header p-0">
                                                        <h3>Medication</h3>
                                                    </section>
                                                    <section id="form-medication" class="container-fluid">
                                                        <t t-foreach="application.medical_medications_ids" t-as="medication">
                                                            <article class="border rounded p-2 m-1" t-att-id="'medical_medication_{}'.format(medication_index+1)">
                                                                <input required="required" class="form-control" type="hidden" name="medical_medication_id" t-att-value="medication.id"/>
                                                                <div class="row">
                                                                    <section class="col-5">
                                                                        <label>
                                                                            Name
                                                                            <span class="text-danger"> *</span>
                                                                        </label>
                                                                        <input required="required" class="form-control" type="text" name="medical_medication_name" t-att-value="medication.name"/>
                                                                    </section>
                                                                    <section class="col-6">
                                                                        <label>
                                                                            comment
                                                                            <span class="text-danger"> *</span>
                                                                        </label>
                                                                        <input required="required" class="form-control" type="text" name="medical_medication_comment" t-att-value="medication.comment"/>
                                                                    </section>
                                                                    <section class="col-1 d-flex justify-content-center p-3">
                                                                        <button type="button" class="btn btn-danger remove-medical_medication" t-att-data-id="medication_index+1">
                                                                            <i class="fa fa-times"/>
                                                                        </button>
                                                                    </section>
                                                                </div>
                                                            </article>
                                                        </t>
                                                        <button type="button" class="add-medical_medication btn btn-secondary d-block ml-auto mr-1 mt-3 mb-3 btn-add">&#10010;</button>
                                                    </section>
                                                </div>
                                                <div class="row mt-3 mb-3 align-items-center justify-content-center">
                                                    <button class="btn btn-lg btn-warning">Submit changes</button>
                                                </div>
                                            </section>
                                        </form>

                                        <script type="text/javascript" src="/adm/static/js/medical_info.js"/>
                                    </t>
                                </div>
                            </section>
                        </section>
                    </main>
                </div>

            </div>
        </t>
    </template>
</odoo>
