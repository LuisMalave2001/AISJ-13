<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <template id="adm.temaplte_application_medical_condition">
        <t t-if="condition">
            <input type="hidden" t-att-value="condition.id" data-adm-field="id"
                   data-adm-field-type="INTEGER"/>
        </t>
        <article class="border rounded p-2 m-1">
            <div class="row">
                <section class="col-5">
                    <label>
                        Name
                        <span class="text-danger"> *</span>
                    </label>
                    <t t-if="not condition">
                        <input type="checkbox" class="js_condition_select"/> Other
                        <select class="form-control js_select_health"
                                data-adm-field="name" required="required"
                                name="medical_condition_name">
                            <option value="Asthma">Asthma</option>
                            <option value="Attention Deficit Disorder/Hyperactive">Attention Deficit Disorder/Hyperactive</option>
                            <option value="Neurological Concerns">Neurological Concerns</option>
                            <option value="Seizure disorder/Epilepsy">Seizure disorder/Epilepsy</option>
                            <option value="Diabetes">Diabetes</option>
                            <option value="Frequent ear infections">Frequent ear infections</option>
                            <option value="Frequent Headaches">Frequent Headaches</option>
                            <option value="Heart Problems">Heart Problems</option>
                            <option value="Kidney/urinary problems">Kidney/urinary problems</option>
                            <option value="Menstrual problems">Menstrual problems</option>
                            <option value="Glasses/contact lens">Glasses/contact lens</option>
                            <option value="Emotional concerns">Emotional concerns</option>
                        </select>
                    </t>
                    <input required="required" class="form-control js_select_health"
                           type="text" name="medical_condition_name"
                           data-adm-field="name"
                           t-att-value="condition and condition.name"/>
                </section>
                <section class="col-6">
                    <label>
                        comment
                        <span class="text-danger"> *</span>
                    </label>
                    <input required="required" class="form-control"
                           type="text"
                           name="medical_condition_comment"
                           data-adm-field="comment"
                           t-att-value="condition and condition.comment"/>
                </section>
                <section
                        class="col-1 d-flex justify-content-center p-3">
                    <button type="button"
                            class="btn btn-danger remove-rel-medical">
                        <i class="fa fa-times"/>
                    </button>
                </section>
            </div>
        </article>
    </template>

    <template id="adm.temaplte_application_medical_allergies">

        <t t-if="allergy">
            <input type="hidden" t-att-value="allergy.id" data-adm-field="id"
                   data-adm-field-type="INTEGER"/>
        </t>
        <article class="border rounded p-2 m-1">
            <div class="row">
                <section class="col-5">
                    <label>
                        Name
                        <span class="text-danger"> *</span>
                    </label>
                    <input required="required" class="form-control" type="text" name="medical_allergy_name"
                           data-adm-field="name"
                           t-att-value="allergy and allergy.name"/>
                </section>
                <section class="col-6">
                    <label>
                        comment
                        <span class="text-danger"> *</span>
                    </label>
                    <input required="required" class="form-control" type="text"
                           data-adm-field="comment" name="medical_allergy_comment"
                           t-att-value="allergy and allergy.comment"/>
                </section>
                <section class="col-1 d-flex justify-content-center p-3">
                    <button type="button" class="btn btn-danger remove-rel-medical">
                        <i class="fa fa-times"/>
                    </button>
                </section>
            </div>
        </article>
    </template>

    <template id="adm.temaplte_application_medical_Medication">
        <t t-if="medication">
            <input type="hidden" t-att-value="medication.id" data-adm-field="id"
                   data-adm-field-type="INTEGER"/>
        </t>
        <article class="border rounded p-2 m-1">
            <div class="row">
                <section class="col-5">
                    <label>
                        Name
                        <span class="text-danger"> *</span>
                    </label>
                    <input required="required" class="form-control" type="text" name="medical_medication_name"
                           data-adm-field="name"
                           t-att-value="medication and medication.name"/>
                </section>
                <section class="col-6">
                    <label>
                        comment
                        <span class="text-danger"> *</span>
                    </label>
                    <input required="required" class="form-control" type="text" name="medical_medication_comment"
                           data-adm-field="comment"
                           t-att-value="medication and medication.comment"/>
                </section>
                <section class="col-1 d-flex justify-content-center p-3">
                    <button type="button" class="btn btn-danger remove-rel-medical">
                        <i class="fa fa-times"/>
                    </button>
                </section>
            </div>
        </article>
    </template>

    <template id="adm.template_application_menu_medical_info">
        <t t-call="adm.template_application_page_commons">
            <div id="template_condition" style="display: none;">
                <t t-call="adm.temaplte_application_medical_condition"/>
            </div>
            <div id="template_medication" style="display: none;">
                <t t-call="adm.temaplte_application_medical_Medication"/>
            </div>
            <div id="template_allergy" style="display: none;">
                <t t-call="adm.temaplte_application_medical_allergies"/>
            </div>
            <t t-set="title">Application</t>
            <t t-set="head">
                <t t-call-assets="adm.assets_application_school_health" defer_load="True"/>
            </t>
            <link rel="stylesheet" href="/adm/static/src/css/form_application.css"/>
            <link rel="stylesheet" href="/adm/static/src/css/medical.css"/>
            <div class="oe_struture"/>
            <div class="oe_struture">
                <t t-call="adm.template_application_menu"/>

                <div class="container-fluid d-flex p-4">
                    <main class="row w-100 position-relative">
                        <section class="card mb-2 col p-0">
                            <section class="card-header">
                                <h1>Medical Information</h1>
                            </section>

                            <section class="card-body container">
                                <div class="container">
                                    <t t-if="application_id.status_id.type_id !='return' and application_id.status_id.type_id != 'started'">
                                        <div class="alert alert-warning mt-3" role="alert">
                                            The request has already been sent.
                                        </div>
                                    </t>
                                    <t t-else="">
                                        <p>Please provide us with all health information in case your child has either
                                            an acute or chronic condition. All information will be kept confidential. We
                                            encourage you to leave a dosage of any routine or emergency medications
                                            (inhalers, EpiPens, etc.) in the health office. Our goal is to provide your
                                            child with the safest and healthiest environment at AISJ. We will be happy
                                            to assist you with any question or concern.</p>
                                        <section class="container-fluid mt-3">
                                            <div class="row mb-4 justify-content-center align-items-center"
                                                 data-adm-model-fields="1">
                                                <div class="col-12 col-md-9">
                                                    <div class="row">
                                                        <section class="col-12 col-md-4">
                                                            <label>
                                                                Doctor Name
                                                                <span class="text-danger"> *</span>
                                                            </label>
                                                            <input required="required" class="form-control"
                                                                   type="text"
                                                                   name="doctor_name"
                                                                   data-adm-field="doctor_name"
                                                                   t-att-value="application_id.doctor_name"/>
                                                        </section>

                                                        <section class="col-12 col-md-4">
                                                            <label> Hospital <span class="text-danger"> *</span> </label>
                                                            <input required="required" class="form-control"
                                                                   type="text"
                                                                   name="hospital"
                                                                   data-adm-field="hospital"
                                                                   t-att-value="application_id.hospital"/>
                                                        </section>
                                                        <section class="col-12 col-md-4">
                                                            <label>
                                                                Doctor phone
                                                                <span class="text-danger"> *</span>
                                                            </label>
                                                            <input required="required" class="form-control"
                                                                   type="text"
                                                                   name="doctor_phone"
                                                                   data-adm-field="doctor_phone"
                                                                   t-att-value="application_id.doctor_phone"/>
                                                        </section>
                                                        <section class="col">
                                                            <label>
                                                                Student Blood Type
                                                                <span class="text-danger"> *</span>
                                                            </label>
                                                            <input required="required" class="form-control"
                                                                   type="text"
                                                                   name="blood_type"
                                                                   data-adm-field="blood_type"
                                                                   t-att-value="application_id.blood_type"/>
                                                        </section>
                                                        <section class="col">
                                                            <label>
                                                                Permision to treat?
                                                                <span class="text-danger"> *</span>
                                                            </label>

                                                            <!--                                                            <div class="form-check form-check-inline">-->
                                                            <!--                                                                <input class="form-check-input"-->
                                                            <!--                                                                       type="radio"-->
                                                            <!--                                                                       name="permission_to_treat"-->
                                                            <!--                                                                       id="pst_yes"-->
                                                            <!--                                                                       value="true"-->
                                                            <!--                                                                       t-att-checked="application_id.permission_to_treat"/>-->
                                                            <!--                                                                <label class="form-check-label"-->
                                                            <!--                                                                       for="pst_yes">-->
                                                            <!--                                                                    Yes</label>-->
                                                            <!--                                                            </div>-->
                                                            <!--                                                            <div class="form-check form-check-inline">-->
                                                            <!--                                                            <input class="form-check-input" type="radio"-->
                                                            <!--                                                                   id="pst_no"-->
                                                            <!--                                                                   name="permission_to_treat" value=""-->
                                                            <!--                                                                   t-att-checked="not application_id.permission_to_treat"/>-->
                                                            <!--                                                            <label class="form-check-label" for="pst_no">-->
                                                            <!--                                                                No</label>-->
                                                        </section>
                                                    </div>

                                                    <div class="card mt-2">
                                                        <section class="card-header p-0">
                                                            <h3>Medical Conditions</h3>
                                                        </section>
                                                        <section id="condition_list"
                                                                 class="container-fluid card-body p-0"
                                                                 data-adm-field-type="ONE2MANY"
                                                                 data-adm-field="medical_conditions_ids">
                                                            <t t-foreach="application_id.medical_conditions_ids"
                                                               t-as="condition">
                                                                <div data-adm-rel="rel">
                                                                    <t t-call="adm.temaplte_application_medical_condition"/>
                                                                </div>
                                                            </t>
                                                        </section>
                                                        <button type="button"
                                                                class="add-medical_condition btn btn-secondary d-block ml-auto mr-1 mt-3 mb-3 btn-add"
                                                                id="btn-condition">&#10010;</button>
                                                    </div>

                                                    <div class="card mt-2">
                                                        <section class="card-header p-0">
                                                            <h3>Medical allergies</h3>
                                                        </section>
                                                        <section id="allergy_list"
                                                                 class="container-fluid card-body p-0"
                                                                 data-adm-field-type="ONE2MANY"
                                                                 data-adm-field="medical_allergies_ids">
                                                            <t t-foreach="application_id.medical_allergies_ids"
                                                               t-as="allergy">
                                                                <div data-adm-rel="rel">
                                                                    <t t-call="adm.temaplte_application_medical_allergies"/>
                                                                </div>
                                                            </t>
                                                        </section>
                                                        <button type="button"
                                                                class="add-medical_allergy btn btn-secondary d-block ml-auto mr-1 mt-3 mb-3 btn-add">
                                                            &#10010;</button>
                                                    </div>

                                                    <div class="card mt-2">
                                                        <section class="card-header p-0">
                                                            <h3>Medication</h3>
                                                        </section>
                                                        <section id="medication_list" class="container-fluid"
                                                                 data-adm-field-type="ONE2MANY"
                                                                 data-adm-field="medical_medications_ids">
                                                            <t t-foreach="application_id.medical_medications_ids"
                                                               t-as="medication">
                                                                <div data-adm-rel="rel">
                                                                    <t t-call="adm.temaplte_application_medical_Medication"/>
                                                                </div>
                                                            </t>
                                                        </section>
                                                        <button type="button"
                                                                class="add-medical_medication btn btn-secondary d-block ml-auto mr-1 mt-3 mb-3 btn-add">
                                                            &#10010;</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </section>
                                        <!--                                        <script type="text/javascript" src="/adm/static/js/medical_info.js"/>-->
                                    </t>
                                </div>
                            </section>

                        </section>

                        <t t-if="application_id.status_id.type_id in ['return', 'started']">
                            <div class="col-12 col-md-3">
                                <section class="card card-sticky-save mb-3 mt-3">
                                    <div class="card-body">
                                        <p> Fields with (*) are mandatory </p>
                                        <section
                                                class="d-flex flex-column align-items-center justify-content-center bg-white p-2 mb-4">
                                            <span class="text-muted mb-2">Please, make sure you save
                                                the changes</span>
                                            <button class="btn btn-primary js_submit_json"
                                                    type="button">Save</button>
                                        </section>
                                    </div>
                                </section>
                            </div>
                        </t>
                    </main>
                </div>

            </div>
        </t>
    </template>
</odoo>
